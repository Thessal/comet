# Runtime & Execution Model (`runtime.md`)

This document describes the runtime capabilities required to execute the code generated by Comet.

## 1. Type Erasure vs. Preservation

Comet is a **Generative** language with a rich Compile-Time Type System.
-   **Compile-Time**: Types like `Volume` (with properties `NonZero`, `Count`) guide synthesis.
-   **Run-Time**: Types are erased to their physical representation (e.g., `Arc<DataFrame>`).

## 2. Generated Code Structure (Rust)

The output is a Rust library containing the combinatorial strategy variants.

### Example Output

```rust
// Strategy Variant 1 (Ratio Logic)
pub fn strategy_1(volume: &DataFrame, ebit: &DataFrame) -> Result<Signal> {
    // 1. Check constraints (runtime assertions if needed, though mostly static)
    // 2. Compute
    let ratio = volume / volume.rolling(21).mean(); // Synthesis chose Ratio
    // ...
}

// Strategy Variant 2 (Spread Logic)
pub fn strategy_2(volume: &DataFrame, ebit: &DataFrame) -> Result<Signal> {
    let spread = volume - volume.rolling(21).mean(); // Synthesis chose Spread
    // ...
}
```
