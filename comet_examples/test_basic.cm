module TestBasic

import StdLib
import Data.Universe

// 1. Unary Logic (Normalization)
// In Clean/Comet, we define these as functions if we have multiple behaviors for the same types.

zscore_impl :: Series a -> Series a
zscore_impl x = zscore x

rank_impl :: Series a -> Series a
rank_impl x = rank x

keep_impl :: Series a -> Series a
keep_impl x = x

// 2. Binary Logic (Comparison)

ratio_impl :: Series a -> Series a -> Series a
ratio_impl a b = a / b

spread_impl :: Series a -> Series a -> Series a
spread_impl a b = a - b

// 3. Ternary Logic

band_trigger :: Series a -> Real -> Real -> Series a
band_trigger x high low = trim_ternary x high low

// Flow Example
// Converted to a main function or strategy function
examples :: Series a -> Series a -> Series a
examples price vol =
    let
        // 1. Unary
        norm_price = zscore_impl price
        
        // 2. Binary
        diff = ratio_impl price norm_price
        
        // 3. Ternary
        sig = band_trigger diff 2.0 -2.0
    in
        sig
